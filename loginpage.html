<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>login page</title>

    
 <script
      type="module"
      src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"
    ></script>
    <script
      nomodule
      src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"
    ></script>


</head>
    <style>
       
    body {
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }
    .wrapper {

      margin-left: 200px;
      margin-top: 50px;
      display: flex;
      position: relative;
      width: 1200px;
      height: 300px;
      margin-bottom: 300px;
      background: transparent;
    }


    /* Entire form */

    .form-lgn {
      background:#f92288;
      border: 2px solid white;
      border-radius: 20px;
      height:450px;
      width:480px;
      margin-left: 250px;
    }
    .form-lgn h1 {
      color: white;
      margin-left: 180px;
      margin-top: 15px;
      font-size: 40px;
      font-weight: bold;
    }

    /* admin outside button */

    .btn2 {
      margin-top: 10px;
      border-radius: 3px;
      width: 80px;
      height: 35px;
      border: 2px solid #f92288;
      margin-left: 100px;
      background: white;
    }

    .btn2:hover {
      transform: scale(1.1);
      background: white;
      color: #f92288;
    }


    /* inside login button */

    .btn3 {
      margin-top: 10px;
      border-radius: 3px;
      width: 80px;
      height: 40px;
      margin-left: 140px;
      background: white;
      border: 2px solid #f92288;
    }
    .btn3:hover {
      transform: scale(1.1);
      background: white;
      color: #f92288;
      border: 2px solid rgb(174, 173, 174);
      border-radius: 3px;
    }

    .img img {
      margin-left: 100px;
      float: right;
      width: 450px;
      height: 400px;
      border-radius: 15px;
      background: rgb(174, 173, 173);
    }
    .img {
      margin-top: 0px;
    }
    .input-box {
      margin-left: 50px;
      margin-top: 80px;
    }
    .input-box label {
      font-family: Arial;
      font-weight: bold;
      color: white;
      font-size: 16px;
    }
    /* desgnin the icons */

    .input-box ion-icon {
      color: white;
      font-size: 18px;
    }
    .b1 {
      margin-left: 50px;
      margin-top: 15px;
    }
    .input-box input {
      border-radius: 3px;
      border: 1px solid #f92288;
      outline: none;
      height: 25px;
      width: 150px;
    }

    .b2 {
      margin-top: 30px;
      margin-left: 1000px;
    }

    .link {
      margin-top: 60px;
      color: azure;
      font-size: 20px;
      font-weight: bold;
      margin-left: 30px;
    }
    .link p a {
      list-style-type: none;
      text-decoration: none;
      color: rgb(185, 185, 185);
    }

input:focus {
  border: 2px solid rgb(6, 174, 6) !important; /* Focus pannumbothu border blue */
  box-shadow: none !important;      /* Bootstrap glow remove */
  outline: none;
}

  </style>

<body>
     <!---admin btn-----      no use in slash becaue in root file so not use>-------->
     <form action="adminpage.html" method="GET"><!---THIS ACTION GET  FROM ADMIN  PAge---->
    <div class="b2">
      <input type="submit" value="Admin" class="btn2" />
    </div></form>
    <i class="fa-solid fa-lock"></i>
    <div class="wrapper">
      <div class="form-lgn">
        <h1>Login</h1>
        <form id="lgnfrm">
          <div class="input-box">
            <label>Username <ion-icon name="person"></ion-icon></label>
            <input type="text" name="name" required   id="username" autocomplete="off"/><br /><br />
            <label>Password <ion-icon name="lock-closed"></ion-icon> </label>
            <input type="password" name="password" id="password"  required    autocomplete="off" /> <br />
          </div>
          <div class="b1">
            <input type="submit" value="Login" class="btn3" />
          </div>
          <div class="link">
            <p>
              Don't have an account?<a href="register.html"><span> Sign up</span></a>
            </p>
            </div>
        </form>
          </div>
        </div>
        </form>
      </div>
    </div>

   <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script type="module">
    /*antha link */
     import { initializeApp } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-app.js";
import {
    getDatabase,
    ref,
    child,
    get
} from "https://www.gstatic.com/firebasejs/12.1.0/firebase-database.js";

const crudstting = {
    databaseURL: "https://finalyrsprjct-default-rtdb.firebaseio.com/",
};

const app = initializeApp(crudstting);
const db = getDatabase(app);
const dbref = ref(db);
const uname = document.querySelector("#username");
const pword = document.querySelector("#password");
const frm = document.querySelector("#lgnfrm");

frm.addEventListener("submit", function (e) {
    e.preventDefault();

    
    if (!uname.value.trim() || !pword.value.trim()) {
        Swal.fire({
            title: "Error!",
            text: "Please fill all values",
            icon: "warning",
            confirmButtonText: "OK",
        });
        return;
    }

    get(child(dbref, "rgstrtbl"))
        .then((snapshot) => {
            if (snapshot.exists()) {
                let found = false;
                snapshot.forEach((childSnapshot) => {
                    let data = childSnapshot.val();
                    if (data.name === uname.value.trim() && data.pwd === pword.value.trim()) {
                        found = true;
                    }
                });

                if (found) {
                    Swal.fire({
                        title: "Login Successful!",
                        text: "Welcome back!",
                        icon: "success",
                        confirmButtonText: "OK",
                    }).then(() => {
                        // ✅ Redirect to homepage
                        window.location.href = "homepage.html";
                    });
                } else {
                    Swal.fire({
                        title: "Error!",
                        text: "Invalid email or password",
                        icon: "error",
                        confirmButtonText: "OK",
                    });
                }
            } else {
                Swal.fire({
                    title: "Error!",
                    text: "No registered users found.",
                    icon: "error",
                    confirmButtonText: "OK",
                });
            }
        })
        .catch((err) => {
            Swal.fire({
                title: "Error!",
                text: err.message,
                icon: "error",
                confirmButtonText: "OK",
            });
        });
});

</script>

</html>

<!---------
Appo data.name, data.eml, data.pwd nu meaning:

data.name → DB la iruka name value ("Maha")

data.eml → DB la iruka eml value ("maha@gmail.com")

data.pwd → DB la iruka pwd value ("12345")


DB la save panna object key name = code la data.keyname nu call pananum.

data.name → register la save pannathu "name".

data.eml → register la save pannathu "eml".

data.pwd → register la save pannathu "pwd".



-->